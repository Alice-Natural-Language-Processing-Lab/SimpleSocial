@using SimpleSocial.Data.Models
@model SimpleSocia.Services.Models.Account.PostsFeedAndUserInfoViewModel


<script src="~/lib/jquery/dist/jquery.js"></script>
@{
    var counter = 0;
}


@foreach (var post in Model.Posts)
{

    counter++;
    var likeClassName = "like-ajax-" + counter;

    @await Component.InvokeAsync("SinglePost", new {
    currentUserId = Model.CurrentUserInfo.UserId ,
    post = post,
    likeClassName = likeClassName,
    profilePicture = Model.CurrentUserInfo.ProfilePicture,
    commentInputModel = Model.CommentInputModel })
}


<script>
    const posts = document.querySelectorAll('.single-post');
    const modal = document.querySelector('.modal');
    const overlay = document.querySelector('.overlay');

    function toggleModal() {
        modal.classList.toggle('modal-show');
        overlay.classList.toggle('overlay-show');
    }

    posts.forEach(post => {
        post.querySelector('button').addEventListener('click', ()=> {
            const likes = post.querySelector('.likes');
            modal.querySelector('.body').innerHTML = likes.innerHTML;
            toggleModal();
        });
    });

    modal.querySelector('button').addEventListener('click', toggleModal);
</script>